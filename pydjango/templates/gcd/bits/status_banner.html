{% if object.reserved %}
  {% with object.revisions.active as revision %}
  {% with revision.changeset as changeset %}
<div id="index_status" class="index_status_{{ changeset.state }}"><span>
    {% ifequal changeset.state states.OPEN %}
  This {{ object_name }} is currently being edited by
  {{ changeset.indexer.indexer|default:"[no one, please contact the editors to fix this reservation]" }}
  (since {{ revision.created }}, last edit {{ revision.modified }})
    {% endifequal %}
    {% ifequal changeset.state states.PENDING %}
  Edits to this {{ object_name }}
  are currently awaiting review by a GCD Editor
    {% endifequal %}
    {% ifequal changeset.state states.REVIEWING %}
  Edits to this {{ object_name }}
  are being reviewed by GCD Editor {{ changeset.approver.indexer }}
    {% endifequal %}
</span></div>
  {% endwith %}
  {% endwith %}
{% else %}
  <form method="POST"
        action="{% url reserve_revision model_name=object_class,id=object.id %}">
    <input id="edit" name="edit" type="submit" value="Edit"></input>
  </form>
{% endif %}

