{% extends "gcd/base_view.html" %}

{% load i18n %}

{% block title %}
  {% if publisher.is_imprint %}
    GCD :: Publisher :: {{ publisher.parent.name }} :: Imprint :: {{ publisher.name }}
  {% else %}
    GCD :: Publisher :: {{ publisher.name }}
  {% endif %}
{% endblock %}

{% block css %}
<link rel="stylesheet" type="text/css"
      href="{{ MEDIA_URL }}/css/gcd/{{ style }}.css"/>
{% endblock %}

{% block view_body %}

{% include "gcd/bits/publisher_header.html" %}

<dl class="pub_data">
{% if publisher.country %}
  <dt> Country:
  <dd> {{ publisher.country.name }}
{% endif %}

{% if publisher.has_imprints %}
  <dt> Imprints:
  <dd> <a href="{{ publisher.get_absolute_url }}imprints/">{{ publisher.imprint_set.count }}</a>
{% endif %}

{% if publisher.notes %}
  <dt> Notes:
  <dd> {{ publisher.notes|linebreaksbr }}
{% endif %}

{% if publisher.url %}
  <dd> <a href="{{ publisher.get_official_url }}">{{ publisher.url }}</a>
{% endif %}

{% ifequal page.object_list.count 0 %}
  <dt> Titles:
  <dd> None
</dl>
{% else %}
</dl>
<table class="listing">
  <tr>
    <th> Title </th>
    <th> Year </th>
    <th> Issues </th>
    <th> Scans </th>
    <th> Cover Gallery </th>
  </tr>
{% for series in page.object_list %}
  <tr class="{% cycle 'listing_even' 'listing_odd' %}">
    <td> <a href="{{ series.get_absolute_url }}">{{ series.name }}</a> </td>
    <td> {{ series.year_began }}
    <td> <a href="{{ series.get_absolute_url }}status/?style={{ style }}">{{ series.issue_set.count }}</a> </td>
    {% ifequal series.issue_set.count series.scan_count %}
    <td> {{ series.scan_count }} </td>
    {% else %}
    <td> <a href="{{ series.get_absolute_url }}scans/?style={{ style }}">{{ series.scan_count }}</a> </td>
    {% endifequal %}
    <td> <a href="{{ series.get_absolute_url }}covers/?style={{ style }}">Cover Gallery</a> </td>
  </tr>
{% endfor %}
</table>
{% endifequal %}

{% with 1 as paginate_only %}
{% include "gcd/bits/publisher_header.html" %}
{% endwith %}

{% endblock %}
