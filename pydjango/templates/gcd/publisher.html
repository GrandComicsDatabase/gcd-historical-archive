{% extends "gcd/base_view.html" %}

{% load i18n %}

{% block title %}
  GCD :: Publisher :: {{ publisher.name }}
{% endblock %}

{% block css %}
<link rel="stylesheet" type="text/css"
      href="{{ media_url }}/css/gcd/{{ style }}.css"/>
<link rel="stylesheet" type="text/css"
      href="{{ media_url }}/css/gcd/{{ style }}/publisher.css"/>
{% endblock %}

{% block view_body %}

<h1 class="item_id"> <div class="left">{{ publisher.name }}</div> </h1>
<div class="item_id">
  <div class="left">{{ publisher.year_began }} - {{ publisher.year_end }}</div>
  <div class="right pagination">
    {% if page.has_other_pages %}
      {% if page.has_previous %}
        <a href="?style={{ style }}&page={{ page.previous_page_number }}">&lt; {% trans "Previous" %}</a>
      {% else %}
        &lt; {% trans "Previous" %}
      {% endif %}
      |
      {% for number in paginator.page_range %}
        {% ifequal number page_number %}
          {{ number }}
        {% else %}
          <a href="?style={{ style }}&page={{ number }}">{{ number }}</a>
        {% endifequal %}
        |
      {% endfor %}
      {% if page.has_next %}
        <a href="{{ page_url }}?style={{ style }}&page={{ page.next_page_number }}">{% trans "Next" %} &gt;</a>
      {% else %}
        {% trans "Next" %} &gt;
      {% endif %}
    {% endif %}
  </div>
</div>

<dl class="pub_data">
{% if publisher.parent %}
  <dt> Parent Company:
  <dd> <a href="/gcd/publisher/{{ publisher.parent.id }}/?style={{ style }}">{{ publisher.parent.name }}</a>
{% endif %}
{% if publisher.country %}
  <dt> Country:
  <dd id="country"> {{ publisher.country.name }}
{% endif %}

{% ifnotequal publisher.imprint_set.count 0 %}
  <dt> Imprints:
  <dd id="imprints"> <a href="/gcd/publisher/{{ publisher.id }}/imprints/?style={{ style }}">{{ publisher.imprint_set.count }}</a>
{% endifnotequal %}

{% if publisher.notes %}
  <dt> Notes:
  <dd id="notes"> {{ publisher.notes|linebreaksbr }}
{% endif %}

{% ifequal publisher.series_set.count 0 %}
  <dt> Titles:
  <dd id="titles"> None
</dl>
{% else %}
</dl>
<table class="listing">
  <tr>
    <th> Title </th>
    <th> Issues </th>
    <th> Scans </th>
    <th> Cover Gallery </th>
  </tr>
{% for series in page.object_list %}
  <tr class="{% cycle 'listing_even' 'listing_odd' %}">
    <td> <a href="/gcd/series/{{ series.id }}/?style={{ style }}">{{ series.name }}</a> </td>
    <td> <a href="/gcd/series/{{ series.id }}/status/?style={{ style }}">{{ series.issue_set.count }}</a> </td>
    <td> <a href="/gcd/series/{{ series.id }}/scans/?style={{ style }}">{{ series.scan_count }}</a> </td>
    <td> <a href="/gcd/series/{{ series.id }}/covers/?style={{ style }}">Cover Gallery</a> </td>
  </tr>
{% endfor %}
</table>
{% endifequal %}

{% endblock %}
